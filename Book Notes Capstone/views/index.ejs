<%- include('partials/header.ejs'); -%>
<%- include('partials/navbar.ejs'); -%>

<div class="hero-section home px-4 pb-5 mb-5 text-center" >
    <h2 class="display-5 fw-bold py-5">Ricardo Hernandez Book Ratings</h1>
    <div class="col-lg-6 mx-auto">
      <p class="lead mb-4">Quickly design and customize responsive mobile-first sites with Bootstrap, the worldâ€™s most popular front-end open source toolkit, featuring Sass variables and mixins, responsive grid system, extensive prebuilt components, and powerful JavaScript plugins.</p>
      <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
        <button type="button" class="btn btn-dark btn-lg px-4 gap-3">Primary button</button>
        <button type="button" class="btn btn-light btn-lg px-4">Secondary</button>
      </div>
    </div>
</div>
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 align-items-stretch g-4 py-5 mx-5">
      <% books.forEach((book, index) => { %>
        <div class="col">
          <div class="book-card position-relative overflow-hidden rounded-4 shadow-lg h-100"
               data-book-id="<%= book.id %>">
            <div class="card h-100">
              <!-- Front Face -->
              <div class="card-front h-100 rounded-4 lazy-load" 
                   data-bg="<%= book.cover_url %>" 
                   style="background-blend-mode: overlay;">
                <div class="rating d-flex align-items-center">
                  <span class="fw-semibold"><%=book.rating %> <%= book.ratingEmoji %></span>
                </div>
              </div>
              
              <!-- Back Face (hidden on mobile) -->
              <div class="card-back text-white h-100 rounded-4 p-4 d-none d-md-block">
                <h3 class="card-title fs-4 mb-3"><%- book.title %></h3>
                <div class="notes flex-grow-1 mb-3"><%= book.note %></div>
                <div class="meta mt-auto small">
                  <p class="mb-1">Read on: <strong><%= formatDate(book.date_started) %></strong></p>
                  <p class="mb-0">Author: <strong><%= book.author %></strong></p>
                </div>
              </div>
              
              <!-- Mobile Expandable Section -->
              <div class="mobile-expand">
                <h3 class="h5 mb-3"><%= book.title %></h3>
                <div class="notes mb-3"><%= book.note %></div>
                <div class="meta small mb-3">
                  <p class="mb-1">Read on: <strong><%= formatDate(book.date_started) %></strong></p>
                  <p class="mb-2">Author: <strong><%= book.author %></strong></p>
                </div>
                <a href="/books/<%= book.id %>" class="btn btn-sm btn-outline-light">
                  View Full Notes
                </a>
              </div>
            </div>
          </div>
        </div>
      <% }); %>
  
</div>

<%- include('partials/footer.ejs'); -%>